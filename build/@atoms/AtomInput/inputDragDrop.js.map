{"version":3,"file":"inputDragDrop.js","sources":["../../../@atoms/AtomInput/inputDragDrop.tsx"],"sourcesContent":["import { css } from '@emotion/react';\r\nimport { DragEvent, FC, FormEvent, useEffect, useState } from 'react';\r\nimport AtomImage from '../AtomImage';\r\nimport AtomWrapper from '../AtomWrapper';\r\nimport AtomInputTextError from './error';\r\nimport {\r\n  FileInputStyled,\r\n  InputTextLabelStyled,\r\n  InputTextSpanStyled,\r\n  VideoPlayerStyled,\r\n  VideoPlayerStyledContainer,\r\n} from './style';\r\nimport { AtomInputTypes } from './types';\r\n\r\nconst Animation = {\r\n  whileHover: { scale: 1.02, transition: { duration: 0.3 } },\r\n  whileTap: { scale: 0.98, opacity: 0.8 },\r\n};\r\n\r\nconst InputDragDrop: FC<AtomInputTypes> = (props) => {\r\n  const {\r\n    id,\r\n    children,\r\n    formik,\r\n    wrapperCustomCSS,\r\n    imagePreview,\r\n    placeholderDragDrop,\r\n    onChangeDrop,\r\n    video,\r\n  } = props;\r\n  const [preview, setPreview] = useState(``);\r\n  const [dropActive, setDropActive] = useState(false);\r\n\r\n  useEffect(() => {\r\n    setPreview(imagePreview);\r\n  }, [imagePreview]);\r\n\r\n  useEffect(() => {\r\n    if (formik?.values[`${id}`]?.name) {\r\n      const url = URL?.createObjectURL(formik?.values[`${id}`]);\r\n      setPreview(url);\r\n      setDropActive(false);\r\n    } else {\r\n      setPreview(imagePreview ?? ``);\r\n      setDropActive(false);\r\n    }\r\n  }, [formik?.values[`${id}`]]);\r\n\r\n  const Drop = (e: DragEvent<HTMLLabelElement>) => {\r\n    e.preventDefault();\r\n    e.stopPropagation();\r\n    const { files } = e.dataTransfer;\r\n    if (files.length !== 0) {\r\n      const url = URL?.createObjectURL(files[0]);\r\n      setPreview(url);\r\n      setDropActive(false);\r\n      formik?.setFieldValue(id, files[0]);\r\n      onChangeDrop?.(files[0]);\r\n    } else {\r\n      setPreview(``);\r\n      setDropActive(false);\r\n      formik?.setFieldValue(id, ``);\r\n    }\r\n  };\r\n  const DropInput = (e: FormEvent<HTMLInputElement>) => {\r\n    e.preventDefault();\r\n    e.stopPropagation();\r\n    const { files } = e.currentTarget;\r\n\r\n    if (files) {\r\n      if (files.length !== 0) {\r\n        const url = URL?.createObjectURL(files[0]);\r\n        setPreview(url);\r\n        setDropActive(false);\r\n        formik?.setFieldValue(id, files[0]);\r\n        onChangeDrop?.(files[0]);\r\n      } else {\r\n        setPreview(``);\r\n        setDropActive(false);\r\n        formik?.setFieldValue(id, ``);\r\n      }\r\n    }\r\n  };\r\n\r\n  const handleDrag = (e: DragEvent<HTMLLabelElement>) => {\r\n    e.preventDefault();\r\n    e.stopPropagation();\r\n  };\r\n  const {\r\n    labelWidth,\r\n    labelColor,\r\n    labelFontFamily,\r\n    labelFontSize,\r\n    labelFontWeight,\r\n    labelMargin,\r\n    labelPadding,\r\n    spanMargin,\r\n    customCSS,\r\n    label,\r\n    borderRadius,\r\n  } = props;\r\n  return (\r\n    <InputTextLabelStyled\r\n      labelWidth={labelWidth}\r\n      labelColor={labelColor}\r\n      labelFontFamily={labelFontFamily}\r\n      labelFontSize={labelFontSize}\r\n      labelFontWeight={labelFontWeight}\r\n      labelMargin={labelMargin}\r\n      labelPadding={labelPadding}\r\n      customCSS={customCSS}\r\n    >\r\n      {label && (\r\n        <InputTextSpanStyled spanMargin={spanMargin}>\r\n          {label}\r\n        </InputTextSpanStyled>\r\n      )}\r\n      <FileInputStyled\r\n        dropActive={dropActive}\r\n        htmlFor={id}\r\n        onDrop={Drop}\r\n        onDragOver={(e: DragEvent<HTMLLabelElement>) => {\r\n          e.preventDefault();\r\n          e.stopPropagation();\r\n          setDropActive(true);\r\n        }}\r\n        onDragEnter={(event: DragEvent<HTMLLabelElement>) => handleDrag(event)}\r\n        onDragLeave={(e: DragEvent<HTMLLabelElement>) => {\r\n          e.preventDefault();\r\n          e.stopPropagation();\r\n          setDropActive(false);\r\n        }}\r\n        {...props}\r\n        {...Animation}\r\n      >\r\n        {preview === `` && (\r\n          <AtomWrapper flexDirection=\"row\" customCSS={wrapperCustomCSS}>\r\n            {placeholderDragDrop ? (\r\n              placeholderDragDrop(dropActive)\r\n            ) : (\r\n              <>\r\n                {!dropActive ? (\r\n                  <>\r\n                    <AtomImage\r\n                      alt=\"Drag and drop\"\r\n                      height=\"15px\"\r\n                      width=\"15px\"\r\n                      margin=\"0px 10px 0px 0px\"\r\n                      src=\"https://storage.googleapis.com/cdn-bucket-ixulabs-platform/assets/svgs/PFS-0001/upload.svg\"\r\n                    />\r\n                    ARRASTRA Y SUELTA\r\n                  </>\r\n                ) : (\r\n                  <>SUELTA</>\r\n                )}\r\n              </>\r\n            )}\r\n          </AtomWrapper>\r\n        )}\r\n        {video ? (\r\n          <>\r\n            {preview !== `` && (\r\n              <VideoPlayerStyledContainer>\r\n                <VideoPlayerStyled muted autoPlay loop src={preview} />\r\n              </VideoPlayerStyledContainer>\r\n            )}\r\n          </>\r\n        ) : (\r\n          <>\r\n            {preview !== `` && (\r\n              <AtomImage\r\n                alt=\"Drag and drop Preview\"\r\n                src={preview}\r\n                customCSS={css`\r\n                  border-radius: ${borderRadius || '4px'};\r\n                  position: absolute;\r\n                  width: 100%;\r\n                  height: 100%;\r\n                  object-fit: cover;\r\n                `}\r\n              />\r\n            )}\r\n          </>\r\n        )}\r\n        <input\r\n          type=\"file\"\r\n          id={id}\r\n          onChange={DropInput}\r\n          style={{ width: '100%', height: '100%' }}\r\n        />\r\n      </FileInputStyled>\r\n      {children}\r\n      <AtomInputTextError {...props} />\r\n    </InputTextLabelStyled>\r\n  );\r\n};\r\n\r\nexport default InputDragDrop;\r\n"],"names":["__read","useState","useEffect","_jsxs","InputTextLabelStyled","__assign","_jsx","InputTextSpanStyled","FileInputStyled","AtomWrapper","_Fragment","AtomImage","VideoPlayerStyledContainer","VideoPlayerStyled","css","__makeTemplateObject","AtomInputTextError"],"mappings":"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"}