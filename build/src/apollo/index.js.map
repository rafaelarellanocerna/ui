{"version":3,"file":"index.js","sources":["../../../src/apollo/index.ts"],"sourcesContent":["import { ApolloClient, createHttpLink, InMemoryCache } from '@apollo/client';\r\nimport { setContext } from '@apollo/client/link/context';\r\nimport { onError } from '@apollo/client/link/error';\r\nimport cookie from 'js-cookie';\r\nimport CONFIG from '../config';\r\n\r\nconst cache = new InMemoryCache();\r\n\r\nconst httpLink = createHttpLink({\r\n  uri: `${CONFIG.GRAPHQL_URL}`,\r\n});\r\n\r\nconst authLink = setContext((_, { headers }) => ({\r\n  headers: {\r\n    ...headers,\r\n    authorization: `Bearer ${\r\n      cookie.get(`bearer`) ??\r\n      'eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJodHRwOi8vc2NoZW1hcy54bWxzb2FwLm9yZy93cy8yMDA1LzA1L2lkZW50aXR5L2NsYWltcy9uYW1laWRlbnRpZmllciI6ImQxNWM4MmFmLWI1ZTQtNGQ3YS1iN2FkLWJmMDgxMTk2MzJiNCIsImh0dHA6Ly9zY2hlbWFzLm1pY3Jvc29mdC5jb20vd3MvMjAwOC8wNi9pZGVudGl0eS9jbGFpbXMvcm9sZSI6Il9fb3duZXJfXyIsImV4cCI6MTY4NTcyNTEzMiwiaXNzIjoibG9jYWxob3N0OjgwMDAiLCJhdWQiOiJBUEkifQ.bU9C6gBadJVRNwVRXIK2yi7I5WcKyRuKC6goEyl4szk'\r\n    }`,\r\n  },\r\n}));\r\n\r\nconst errorLink = onError(({ graphQLErrors, networkError }) => {\r\n  if (\r\n    graphQLErrors &&\r\n    !graphQLErrors.filter((error) => error.message === `INVALID_TOKEN`)\r\n  )\r\n    graphQLErrors.forEach(({ message, locations, path }) =>\r\n      console.warn(\r\n        `[GraphQL error]: Message: ${message}, Location: ${locations}, Path: ${path}`\r\n      )\r\n    );\r\n  if (networkError) console.warn(`[Network error]: ${networkError}`);\r\n});\r\n\r\nconst link = errorLink.concat(authLink.concat(httpLink));\r\n\r\nconst client = new ApolloClient({\r\n  link,\r\n  ssrMode: true,\r\n  cache,\r\n  connectToDevTools: true,\r\n  queryDeduplication: true,\r\n});\r\n\r\nexport default client;\r\n"],"names":["InMemoryCache","createHttpLink","CONFIG","setContext","cookie","onError","ApolloClient"],"mappings":";;;;;;;;;;;;;;;AAMA,IAAM,KAAK,GAAG,IAAIA,2BAAa,EAAE,CAAC;AAElC,IAAM,QAAQ,GAAGC,6BAAc,CAAC;AAC9B,IAAA,GAAG,EAAE,EAAA,CAAA,MAAA,CAAGC,OAAM,CAAC,WAAW,CAAE;AAC7B,CAAA,CAAC,CAAC;AAEH,IAAM,QAAQ,GAAGC,gBAAU,CAAC,UAAC,CAAC,EAAE,EAAW,EAAA;;AAAT,IAAA,IAAA,OAAO,GAAA,EAAA,CAAA,OAAA,CAAA;AAAO,IAAA,QAAC;AAC/C,QAAA,OAAO,oCACF,OAAO,CAAA,EAAA,EACV,aAAa,EAAE,iBACb,CAAA,EAAA,GAAAC,0BAAM,CAAC,GAAG,CAAC,QAAQ,CAAC,MACpB,IAAA,IAAA,EAAA,KAAA,KAAA,CAAA,GAAA,EAAA,GAAA,iZAAiZ,CACjZ,EACH,CAAA;AACF,KAAA,EAAC;AAAA,CAAA,CAAC,CAAC;AAEJ,IAAM,SAAS,GAAGC,eAAO,CAAC,UAAC,EAA+B,EAAA;QAA7B,aAAa,GAAA,EAAA,CAAA,aAAA,EAAE,YAAY,GAAA,EAAA,CAAA,YAAA,CAAA;AACtD,IAAA,IACE,aAAa;AACb,QAAA,CAAC,aAAa,CAAC,MAAM,CAAC,UAAC,KAAK,EAAA,EAAK,OAAA,KAAK,CAAC,OAAO,KAAK,eAAe,CAAA,EAAA,CAAC;AAEnE,QAAA,aAAa,CAAC,OAAO,CAAC,UAAC,EAA4B,EAAA;AAA1B,YAAA,IAAA,OAAO,aAAA,EAAE,SAAS,GAAA,EAAA,CAAA,SAAA,EAAE,IAAI,GAAA,EAAA,CAAA,IAAA,CAAA;YAC/C,OAAA,OAAO,CAAC,IAAI,CACV,4BAAA,CAAA,MAAA,CAA6B,OAAO,EAAA,cAAA,CAAA,CAAA,MAAA,CAAe,SAAS,EAAA,UAAA,CAAA,CAAA,MAAA,CAAW,IAAI,CAAE,CAC9E,CAAA;AAFD,SAEC,CACF,CAAC;AACJ,IAAA,IAAI,YAAY;AAAE,QAAA,OAAO,CAAC,IAAI,CAAC,2BAAoB,YAAY,CAAE,CAAC,CAAC;AACrE,CAAC,CAAC,CAAC;AAEH,IAAM,IAAI,GAAG,SAAS,CAAC,MAAM,CAAC,QAAQ,CAAC,MAAM,CAAC,QAAQ,CAAC,CAAC,CAAC;AAEzD,IAAM,MAAM,GAAG,IAAIC,yBAAY,CAAC;AAC9B,IAAA,IAAI,EAAA,IAAA;AACJ,IAAA,OAAO,EAAE,IAAI;AACb,IAAA,KAAK,EAAA,KAAA;AACL,IAAA,iBAAiB,EAAE,IAAI;AACvB,IAAA,kBAAkB,EAAE,IAAI;AACzB,CAAA;;;;"}