'use strict';

var ssrWindow_esm = require('../../../ssr-window/ssr-window.esm.js');
require('../../shared/dom.js');
var dom7_esm = require('../../../dom7/dom7.esm.js');

function loadImage(imageEl, src, srcset, sizes, checkForComplete, callback) {
  const window = ssrWindow_esm.getWindow();
  let image;

  function onReady() {
    if (callback) callback();
  }

  const isPicture = dom7_esm["default"](imageEl).parent('picture')[0];

  if (!isPicture && (!imageEl.complete || !checkForComplete)) {
    if (src) {
      image = new window.Image();
      image.onload = onReady;
      image.onerror = onReady;

      if (sizes) {
        image.sizes = sizes;
      }

      if (srcset) {
        image.srcset = srcset;
      }

      if (src) {
        image.src = src;
      }
    } else {
      onReady();
    }
  } else {
    // image already loaded...
    onReady();
  }
}

module.exports = loadImage;
//# sourceMappingURL=loadImage.js.map
